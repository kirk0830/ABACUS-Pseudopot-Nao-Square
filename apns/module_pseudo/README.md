---
published: false
---

<p align="center">
    <img src="../../docs/apns.svg">
</p>

# ABACUS Pseudopot-Nao Square
Module: pseudo
## In brief
This module provides different methods to parse pseudopotentials generated by different pakcages, like ONCVPSP, ATOMPAW, etc.

## File structure
```bash
.
├── README.md
├── __init__.py
├── upf_basic.py
├── upf_import.py
├── local_validity_scan.py
├── ONCVPSP_D_R_Hamann.py
├── GBRV_Vanderbilt.py
├── Atomic_A_Dal_Corso.py
├── ATOMPAW_wentzcovitch.py
├── test
│   ├── gbrv_vanderbilt_unittest.py
│   ├── import_upf_basic_parse_unittest.py
│   └── ...
├── download
│   ├── download.py
│   └── ...
└── generation
    ├── generation.py
    └── ...
```

## Functionality
```
upf_import.py -> upf_basic.py
              -> local_validity_scan.py
              (two file managing submodules)
              -> ONCVPSP_D_R_Hamann.py
              -> GBRV_Vanderbilt.py
              -> Atomic_A_Dal_Corso.py
              -> ATOMPAW_wentzcovitch.py
              (four pseudopotential specializations)
```

## Interface to other modules
### Usage
```python
from sources.module_pseudo.upf_import import read

"""
pseudo: dict
"""
pseudo = read('path/to/pseudo.upf')
```
### Output structure
```json5
{
    "UPF": {
        "data": [],
        "attributes": {
            "version": "2.0.1"
        }
    },
    "PP_INFO": {
        "data": "This pseudopotential file has been produced using the codeONCVPSP  (Optimized Norm-Conservinng Vanderbilt PSeudopotential)scalar-relativistic version 3.3.0 08/16/2017 by D. R. HamannThe code is available through a link at URL www.mat-simresearch.com.Documentation with the package provides a full discription of theinput data below.While it is not required under the terms of the GNU GPL, it issuggested that you cite D. R. Hamann, Phys. Rev. B 88, 085117 (2013)in any publication using these pseudopotentials.",
        "attributes": {}
    },
    "PP_INPUTFILE": {
        "data": [
            "ATOM AND REFERENCE CONFIGURATION",
            "PSEUDOPOTENTIAL AND OPTIMIZATION",
            "LOCAL POTENTIAL",
            "VANDERBILT-KLEINMAN-BYLANDER PROJECTORs",
            "MODEL CORE CHARGE",
            "LOG DERIVATIVE ANALYSIS",
            "OUTPUT GRID",
            "TEST CONFIGURATIONS"
        ],
        "attributes": {
            "ATOM AND REFERENCE CONFIGURATION": {
                "__displacement__": 6,
                "atsym": ["As"],
                "z": [33.0],
                "nc": [5],
                "nv": [3],
                "iexc": [4],
                "psfile": ["upf"],
                "n": [1, 2, 2, 3, 3, 3, 4, 4],
                "l": [0, 0, 1, 0, 1, 2, 0, 1],
                "f": [2.0, 2.0, 6.0, 2.0, 6.0, 10.0, 2.0, 3.0],
                "energy": []
            },
            "PSEUDOPOTENTIAL AND OPTIMIZATION": {/*...*/},
            /*...*/
        }
    },
    "PP_HEADER": {
        "data": [],
        "attributes": {
            "generated": "Generated using ONCVPSP code by D. R. Hamann",
            "author": "anonymous",
            "date": 171031,
            "comment": "",
            "element": "As",
            "pseudo_type": "NC",
            "relativistic": "scalar",
            "is_ultrasoft": "F",
            "is_paw": "F",
            "is_coulomb": "F",
            "has_so": "F",
            "has_wfc": "F",
            "has_gipaw": "F",
            "core_correction": "T",
            "functional": "PBE",
            "z_valence": 15.0,
            "total_psenergy": -191.540689743,
            "rho_cutoff": 13.57,
            "l_max": 2,
            "l_local": -1,
            "mesh_size": 1358,
            "number_of_wfc": 3,
            "number_of_proj": 6
        }
    },
    /*...*/
}
```
`<PP_HEADER>` `z_valence` and `<PP_INPUTFILE>` `ATOM AND REFERENCE CONFIGURATION` provide critical information for generating proper configuration of numerical atomic orbital. To fetch these two data, just in Python dictionary way.